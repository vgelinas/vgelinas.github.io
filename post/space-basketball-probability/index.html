<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Vincent Gélinas">

  
  
  
    
  
  <meta name="description" content="A fun probability question from an xkcd comic.">

  
  <link rel="alternate" hreflang="en-us" href="https://vgelinas.github.io/post/space-basketball-probability/">

  


  
  
  
  <meta name="theme-color" content="hsl(339, 90%, 68%)">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://vgelinas.github.io/post/space-basketball-probability/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Vincent Gélinas">
  <meta property="og:url" content="https://vgelinas.github.io/post/space-basketball-probability/">
  <meta property="og:title" content="Space Basketball Probability | Vincent Gélinas">
  <meta property="og:description" content="A fun probability question from an xkcd comic."><meta property="og:image" content="https://vgelinas.github.io/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="https://vgelinas.github.io/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-07-06T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-07-06T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://vgelinas.github.io/post/space-basketball-probability/"
  },
  "headline": "Space Basketball Probability",
  
  "datePublished": "2020-07-06T00:00:00Z",
  "dateModified": "2020-07-06T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Vincent Gélinas"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Vincent Gélinas",
    "logo": {
      "@type": "ImageObject",
      "url": "https://vgelinas.github.io/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "A fun probability question from an xkcd comic."
}
</script>

  

  


  


  





  <title>Space Basketball Probability | Vincent Gélinas</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Vincent Gélinas</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Vincent Gélinas</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Space Basketball Probability</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Jul 6, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    6 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>This comic was posted by 
<a href="https://xkcd.com/2328/" target="_blank" rel="noopener">xkcd</a> last friday:</p>
<p><img src="/img/posts/xkcd/space_basketball.png" alt=""></p>
<p>I thought I&rsquo;d estimate the number of throws needed to make 30 shots in a row. How long will this take?</p>
<h3 id="a-coin-flipping-problem">A coin flipping problem</h3>
<p>This problem is pretty much the same as the following coin flipping problem: What is the expected number of coin flips needed before you get N consecutive tails?</p>
<p>This is a pretty well-known problem, and google will tell you a lot. The only difference is the probability of success (50% for a fair coin, and 30% for a free throw), but let&rsquo;s start simple.</p>
<p>&nbsp;</p>  
<h4 id="expected-number-of-flips-before-getting-one-tail">Expected number of flips before getting one tail</h4>
<p>Let&rsquo;s start with getting a single tail. Intuitively, we should expect 2 flips are needed on average to get a tail, but let&rsquo;s work it out.</p>
<p>The expected value E is the weighted average over possible outcomes, weighted by the odds of each outcome. In this scenario, the number of flips required could be k = 1, 2, 3, 4, &hellip; and so on. For each number of flips k required, we then figure out the odds of that outcome:</p>
<ul>
<li>k = 1: These are the odds of getting tail at the start. The probability is 1/2.</li>
<li>k = 2: These are the odds of getting head, then tail. This comes out to (1/2)(1/2) = 1/4.</li>
<li>k = 3: These are the odds of getting head, head, then tail. This is $(1/2)^3 = 1/8$.</li>
<li>$\ldots$</li>
</ul>
<p>Following the pattern, if you require exactly $k$ flips then you had $k-1$ heads followed by a tail, and the odds of this are $(1/2)^k$. The expected value is then the sum
\begin{align*}
E &amp;= \sum_{outcome} ({\rm outcome})*({\rm odds}) \newline
&amp;= \ \ \sum_{k = 1}^{\infty} k  (1/2)^k \newline
&amp;= 1 \cdot \frac{1}{2} + 2 \cdot \frac{1}{4} + 3 \cdot \frac{1}{8} + 4 \cdot \frac{1}{16} + &hellip;
\end{align*}
This is a known variant of the 
<a href="https://en.wikipedia.org/wiki/Geometric_series#Geometric_power_series" target="_blank" rel="noopener">geometric series</a>. The general sum can be expressed as
\begin{align*}
\sum_{k = 1}^{\infty} kx^k  = \frac{x}{(x-1)^2}
\end{align*}
valid for all $|x| &lt; 1$. Setting $x = 1/2$ then gives $E = 2$.</p>
<p>So, our initial guess was right: you&rsquo;d expect to need 2 flips before getting a tail.</p>
<p>&nbsp;</p>  
<h4 id="expected-number-of-flips-to-get-two-consecutive-tails">Expected number of flips to get two consecutive tails</h4>
<p>Let&rsquo;s consider a slightly more complex case. This time, we want the expected number of flips before getting two tails in a row.</p>
<p>Just as before we could list all possible scenarios, with the odds of each scenario, and take the weighted average. Instead, we will use a nice trick to simplify our calculations: if you fail after one or two flips, then your expected number E of flips increases by that amount!</p>
<p>To see what this means, let&rsquo;s run over the possible scenarios but only for the first two flips:</p>
<ul>
<li>If the first flip is head, then your expected value at this point is $E+1$. This happens with probability 1/2.</li>
<li>If the first flip is tail, and then head, then your expected value becomes $E+2$. This happens with probability 1/4.</li>
<li>If your first two flips are tail, then you are done. This happens with probability 1/4.</li>
</ul>
<p>Since this covers all possible outcomes, the expected value can then be computed as the sum of expected values for each outcome, weighted by the odds of that outcome. This gives<br>
\begin{align*}
E &amp;= \frac{1}{2}(E+1) + \frac{1}{4}(E+2) + \frac{1}{4}(2).
\end{align*}
This simplifies to
\begin{align*}
E &amp;= (\frac{1}{2} + \frac{1}{4})E + (\frac{1}{2} + \frac{2}{4} + \frac{2}{4}) \newline
&amp;= \frac{3}{4}E + \frac{6}{4}.
\end{align*}
Solving gives $E=6$. So we&rsquo;d expect about 6 flips before seeing two consecutive tails.</p>
<p>&nbsp;</p>  
<h4 id="expected-number-of-flips-to-get-n-consecutive-tails">Expected number of flips to get N consecutive tails</h4>
<p>We can use the same trick as above to go from $2$ to $N$. This time, we look at the possible scenarios for the first N flips and the expected value of each scenario.</p>
<p>If your coin flips start as:</p>
<ul>
<li>a head, then your expected value becomes $E+1$. The odds of this are 1/2.</li>
<li>a tail, followed by a head, your expected value becomes $E+2$. The odds are 1/4.</li>
<li>tail, tail, then head, then your expected value becomes $E+3$. The odds are 1/8.</li>
<li>&hellip;</li>
<li>(N-1) tails, then head, then your expected value becomes $E+N$. The odds are (1/2)^N.</li>
<li>N tails, then you&rsquo;re done. The odds of this are also (1/2)^N.</li>
</ul>
<p>Summing up the expected value of each outcome, we obtain</p>
<p>\begin{align*}
E &amp;= \frac{1}{2}(E+1) + \frac{1}{4}(E+2) + \frac{1}{8}(E+3) + &hellip; + \frac{1}{2^N}(E+N) + \frac{1}{2^N}  N.
\end{align*}</p>
<p>Collecting terms, this simplifies to
\begin{align*}
E = \left(\sum_{k=1}^N \frac{1}{2^k}\right) E + \left( \sum_{k=1}^N \frac{k}{2^k} \right) + \frac{1}{2^N} N.<br>
\end{align*}</p>
<p>As before, these sums are variants of the geometric series. Their general values are
\begin{align*}
&amp;\sum_{k=1}^N x^k = \frac{x^{N+1} - 1}{x-1}\newline
&amp;\sum_{k=1}^N kx^k = \frac{(Nx - N - 1)x^{N+1} + x}{(x-1)^2}.
\end{align*}</p>
<p>Setting $x = \frac{1}{2}$ and solving for $E$ gives $E = 2^{N+1} - 2$. Hence we should expect to flip on average $2^{N+1} - 2$ coins before getting $N$ consecutive tails.</p>
<p>As we see the number of coin flips needed grows rapidly with $N$. Here are the first six values:</p>
<p><img src="/img/posts/xkcd/coinflips.png" alt=""></p>
<p>&nbsp;</p>  
<h3 id="back-to-space-basketball">Back to Space Basketball</h3>
<p>We can use a similar logic to solve our original problem. In the coin problem the odds of success/failure were 50%/50%, while our free throw success/failure rates were 30%/70%.</p>
<p>In general, denote by</p>
<ul>
<li>p: the chance of success for free throws.</li>
<li>q: the chance of failure for free throws.</li>
</ul>
<p>In our setting these values are $p = 0.30$ and $q = 1 - p = 0.70$.</p>
<p>Let&rsquo;s compute the expected number E of free throws needed to make N shots in a row. Like the previous case, we can break down the expected value in terms of what happens on the first $N$ throws:</p>
<ul>
<li>If the 1st throw is a failure, then the expectation becomes $E+1$. The odds of this are $q$.</li>
<li>If we get success, then failure, the expectation is $E+2$. The odds of this are $pq$.</li>
<li>If we get success, success, then failure, the expectation becomes $E+3$ with odds $p^2q$.</li>
<li>&hellip;</li>
<li>If we get (N-1) successes then failure, the expectation is $E+N$ with odds $p^{N-1}q$.</li>
<li>If we get N successes, we are done. The odds of this are $p^N$.</li>
</ul>
<p>The expected value $E$ is again the sum of expectations over all outcomes, weighted by the odds of each outcome. In other words,</p>
<p>$$ E = q(E+1) + pq(E+2) + p^2q(E+3) + &hellip; + p^{N-1}q(E+N) + p^N N. $$</p>
<p>Solving this using the same technique as above (and remembering $q = 1 - p$), we obtain</p>
<p>$$ E = \frac{1-p^N}{p^N(1-p)}. $$</p>
<p>Now, our free throw accuracy is 30%, and so our expected number of shots before getting N=30 consecutive shots in is roughly</p>
<p>$$ E \approx 6.93848×10^{15} = 6,938,480,000,000,000.$$</p>
<p>A non-starter.</p>
<p>Kawhi Leonard is 
<a href="https://www.teamrankings.com/nba/player-stat/free-throw-percentage" target="_blank" rel="noopener">listed</a> as having free throw accuracy of 88.9% this season. His expected number of shots to make 30 in a row, for comparison, is about</p>
<p>$$ E \approx 298 $$</p>
<p>which is way more manageable.</p>
<p>We can get professional player stats for the 2020 Basketball season from 
<a href="https://www.teamrankings.com/nba/player-stat/free-throw-percentage" target="_blank" rel="noopener">various</a> 
<a href="https://www.basketball-reference.com/leagues/NBA_stats_per_game.html" target="_blank" rel="noopener">sites</a>. For example, the average NBA player had a free throw success rate of 77.1% in the last season. Collecting a few players, we can see how long each player needs to make 30 shots in a row.</p>
<table>
<thead>
<tr>
<th align="right">player</th>
<th align="right">free throw success rate</th>
<th align="right">expected value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">Devin Booker</td>
<td align="right">0.916</td>
<td align="right">154</td>
</tr>
<tr>
<td align="right">Kawhi Leonard</td>
<td align="right">0.889</td>
<td align="right">298</td>
</tr>
<tr>
<td align="right">Kyle Lowry</td>
<td align="right">0.861</td>
<td align="right">634</td>
</tr>
<tr>
<td align="right">Average NBA Player</td>
<td align="right">0.771</td>
<td align="right">10675</td>
</tr>
<tr>
<td align="right">LeBron James</td>
<td align="right">0.697</td>
<td align="right">166558</td>
</tr>
</tbody>
</table>

    </div>

    



















  
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
